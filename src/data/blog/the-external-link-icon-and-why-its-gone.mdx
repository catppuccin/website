---
hero:
  image: "./the-external-link-icon-and-why-its-gone.webp"
  author: "Karina Vorozheeva"
  source: "https://unsplash.com/photos/photo-of-three-butterflies-pollinating-on-purple-petaled-flowers-Kol2ib6ehQE"
title: "Why We Ditched the Icon for External Links"
summary: "The small arrow beside external links was nice... so why did we get rid of it?"
category: "DevLog"
datePosted: "2024-12-14"
featured: true
authors:
  - name: "Lemon"
    title: "Co-Owner"
    github: "unseen-ninja"
    email: "lemon@unseen.ninja"
  - name: "Hammy"
    title: "Co-Owner"
    github: "sgoudham"
    email: "hammy@catppuccin.com"
---

You may or may not have already noticed it; The small arrow (`â†—`) we used to
indicate links with a target outside of `catppuccin.com` has been removed. 

Surprisingly, this ended up being a tough decision as we grew quite attached to
the little guy, but ultimately the decision came down to two key concerns:

1. **Growing technical complexity**
2. **Icon ambiguity**

Let's dive in!

## Initial implementation

For the initial release of the website, we created a `Link` component to be used
throughout the codebase. This worked the way we wanted it to as we could control
the styling by passing in or omitting props.

```astro title="Link.astro"
---
interface Props {
  href: string;
  external?: boolean;
  muted?: boolean;
}

const { href, external = false, muted = false } = Astro.props;
---

<a href={href} class:list={[`${muted ? "muted" : ""}`]}>
  <slot />{external ? <span class="external">&#x2197;</span> : ""}
</a>

<style lang="scss">
  ...
</style>
```

While there are certainly multiple approaches to achieve the same goal that we
had, this one worked and we were more or less happy with it.

## External link icons in blog posts

Recently, we made the decision to launch a blog and, thankfully, Astro made it
_very easy_ to get one up and running. We added the official
[@astrojs/mdx](https://github.com/withastro/astro/tree/main/packages/integrations/mdx/)
integration, created the new blog layout, and wrote [our first blog
post!](/blog/celebrating-three-years-of-catppuccin) ðŸ¥³

While writing this blog post, we realised that our design meant the `Link`
component needed to be imported to specify an external link, which we weren't
particularly fond of...

```mdx title="celebrating-three-years-of-catppuccin.mdx"
import Link from "../../components/Link.astro"

Three years ago today, 5th December 2021, <Link
href="https://github.com/pocco81" external>Pocco</Link> created the <Link
href="https://github.com/catppuccin/catppuccin/releases/tag/v0.1.0"
external>v0.1.0</Link> GitHub release.
```

We tried mapping the `a` tag to the `Link` component, but couldn't quite figure
out how to pass in the `external` prop.

It would be a bad idea to assume all links within a blog post are internal or
external, so we ditched this idea and continued on with other tasks we wanted to
accomplish.

## Auto detecting external links

A few days later, we performed the upgrade to [Astro 5 and Svelte
5](https://github.com/catppuccin/website/pull/116), prompting us to reconsider
and re-evaluate the structure of the codebase. From revisiting the `Link`
component, we realised that we could use the `SITE` environment variable given
to us by Astro to determine external links.

Here's our brand new and improved `Link` component:

```svelte title="Link.svelte"
<script lang="ts">
  import type { Snippet } from "svelte";

  interface Props {
    href: string;
    externalIcon?: boolean;
    muted?: boolean;
    underline?: boolean;
    children: Snippet;
  }

  let { href, externalIcon = true, muted = false, underline = true, children }: Props = $props();

  const domain = import.meta.env.SITE;
</script>

<!-- We need the "externalIcon" boolean since we may not always to put the external icon on external links. -->
<!-- For example, the "Powered By Vercel" badge. -->
{#snippet externalLinkIcon()}
  {#if externalIcon}<span class="external">&#x2197;</span>{/if}
{/snippet}

{#if !href.includes(domain) && !href.startsWith("/") && !href.startsWith("#")}
  <a {href} class:muted class:underline>{@render children()}{@render externalLinkIcon()}</a>
{:else}
  <a {href} class:muted class:underline>{@render children()}</a>
{/if}

<style lang="scss">
  ...
</style>
```

This approach is... much better... right? Well, actually, we didn't think so.
The implementation is much more complicated and convoluted than we'd have liked
it to be.

With external links now identified based on the value of `href`, we needed an
extra `externalIcon` prop to disable the icon. The most notable example being
the "Powered By Vercel" badge in our footer. 

At this point, we were suitably fed up of the extra complexity we were bringing
into this codebase, but the real breaking point was yet to come...

## Adding links to headings

This breaking point came when we started work on adding anchor links to blog
headings.

TODO

- Talk about how rehype tries to inject an anchor tag to all the headings but it
cannot since we're using a custom Link component
- Talk about how this then really prompted the idea of removing the external
icon altogether

## What does the icon _really_ mean?

This kind of iconography has existed for a long time and while we personally
thought the meaning of the icon was clear, it turns out not everyone thinks
about it the same way we do.

If you come to think of it... what does it _actually_ indicate? Does it
This kind of iconography has been around for ages but it has kinda gotten out of
use in recent years and as it turns out this is not just because people don't
like it. If you come to think of it.. what does it _actually_ indicate?  Does it
indicate an external link â€“ _like we used it on this website_ â€“ or would it
indicate that the link â€“ _no matter the domain_ â€“ opens in a new tab â€“ or...
_both_?

> Weâ€™d assumed that there was a clear need for the external link icon, but in 4 years weâ€™ve seen no evidence that backs this up [...]
>
> <cite>~ Tim Paul on [designnotes.blog.gov.uk](https://designnotes.blog.gov.uk/2016/11/28/removing-the-external-link-icon-from-gov-uk/)</cite>


## Issues with development in our website system

Initially we wrapped our links inside a custom Astro component which takes `external` as a prop and depending on that it would add a `span` including the `â†—` character.

So far, so good.. but if we look at the website footer now we can find the Vercel badge â€“Â that's an external link. Okay.. so one edge case, we just wrap it inside a regular anchor tag and because there is no text for that link we don't miss out on the styling from our custom component.

Then the ports and maintainers arrived. Now we suddently had long lists that all contained external links. No biggie for [community](/community) but on the [ports](/ports) page the arrow was really out of place. Just another place where we use a regular anchor tag, right? At least that how we handled it.

Far from pretty and as we recently went through our codebase we decided to clean up everything which also came with the decision to use the link component wherever we have links; and suddenly the issue came flooding in.


### Links that have content other than plain text

Likely our biggest offender: Images inside links. To avoid it we need to specify CSS that applies to `anchor` tags which include graphics and ensure that we don't get the arrow icon (as well as removing the underline effect).

Oh, right; The port cards also are links so let's wrap them inside our link component! Aaand we get a weird dangling arrow trailing underneath the card layout. Let's extend our overrideÂ â€“Â luckily we can use the same as for images because they should act the same.

And since link styling was scoped to the component â€“ let's throw in a little `:global()` just for good measure.

```scss title="Link.svelte" {2-3}
a:global(:has(img, svg, .port-card)) {
  text-decoration: none;

  > span.external {
    display: none !important;
  }
}
```
Thanks, I hate it!


### Links in blog posts

The next big thing was the release of our blog. Suddenly we had a place where our content was written in Markdown. By default the Markdown compiler obviously just uses regular anchor tags so if we were to use links with a target outside of catppuccin.com we obviously wouldn't have the indicator icon.

Out first idea was to just place the icon through CSS and ditch the custom link component.

```scss title="_typography.css"
a[href^="https://"]::after {
  content: '\2197';
}
```

That works **but** the setup for overrides just got even more complicated with this â€“ so let's not do it.

An amazing feature that comes with Astro and MDX is that you can specify custom
components to replace default HTML mappings â€“ oh, wait: You can't pass props.
What if we just change the link component to have a check for external URLs?
That's exactly what we did:

```svelte title="Link.svelte"
{#snippet externalLinkIcon()}
  {#if externalIcon}
    <span class="external">&#x2197;</span>
  {/if}
{/snippet}

{#if !href.includes(domain) && !href.startsWith("/") && !href.startsWith("#")}
  <a {href} class:muted class:underline>
    {@render children()}{@render externalLinkIcon()}
  </a>
  [...]
{/if}
```
We're kinda doubling the overhead by both having the `externalIcon` prop which overwrites the added icon in case we don't want it, and the check whether or not the target URL is an external one.

And suddenly we're a million overrides and conditionals deep down in a mess that's really annoying to work with.

This prompted us to just remove the icon in order to re-simplify our codebase and overhead for writing code and content.

Farewell little guy! You will be missed. ðŸ’”
